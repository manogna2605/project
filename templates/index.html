<!DOCTYPE html>
<html>
<head>
    <title>Emergency Alert</title>
    <script src="https://www.gstatic.com/firebasejs/10.5.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.5.0/firebase-database-compat.js"></script>
</head>
<body style="font-family:sans-serif; text-align:center; margin-top:80px;">
    <h2>🚨 Emergency Alert System</h2>
    <button id="alertBtn" style="padding:15px 25px; font-size:18px;">Send Alert 🚨</button>
    <p id="status"></p>

    <audio id="siren" src="{{ url_for('static', filename='alert.mp3') }}" preload="auto"></audio>

    <script>
        // 🔥 Replace with your Firebase config from Firebase Console
        const firebaseConfig = {
            apiKey: "YOUR_API_KEY",
            authDomain: "YOUR_PROJECT_ID.firebaseapp.com",
            databaseURL: "https://YOUR_PROJECT_ID.firebaseio.com",
            projectId: "YOUR_PROJECT_ID",
            storageBucket: "YOUR_PROJECT_ID.appspot.com",
            messagingSenderId: "125358364983",
            appId: "YOUR_APP_ID"
        };

        firebase.initializeApp(firebaseConfig);
        const db = firebase.database();

        const btn = document.getElementById("alertBtn");
        const status = document.getElementById("status");
        const siren = document.getElementById("siren");

        btn.addEventListener("click", () => {
            const now = Date.now();
            db.ref("alerts/").set({ time: now });
            status.innerText = "🚨 Alert sent!";
        });

        db.ref("alerts/").on("value", snapshot => {
            const data = snapshot.val();
            if (data) {
                siren.play();
                alert("⚠️ Someone pressed the danger button!");
            }
        });
    </script>
</body>
</html>
